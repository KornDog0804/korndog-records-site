<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Shop Vinyl â€¢ KornDog Records</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="style.css">

  <style>
    :root {
      --bg: #050013;
      --bg-alt: #0b0420;
      --accent: #7bff5a;
      --accent-soft: rgba(123, 255, 90, 0.1);
      --text: #f5f5ff;
      --muted: #a1a1c5;
      --card: #12052b;
      --border: #2b1550;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background: radial-gradient(circle at top, #2a0a60 0, var(--bg) 55%);
    }
    a { color: inherit; text-decoration: none; }

    header {
      position: sticky; top: 0; z-index: 20;
      backdrop-filter: blur(12px);
      background: linear-gradient(to right, rgba(10, 1, 30, 0.95), rgba(10, 1, 25, 0.9));
      border-bottom: 1px solid rgba(123, 255, 90, 0.2);
    }
    .nav-inner{
      max-width: 1100px; margin: 0 auto; padding: 0.75rem 1.25rem;
      display:flex; align-items:center; justify-content:space-between; gap:1rem;
    }
    .logo-link { display:inline-flex; align-items:center; justify-content:center; }
    .logo-circle{
      width:44px; height:44px; border-radius:999px;
      border:2px solid var(--accent);
      background: radial-gradient(circle at 30% 30%, #5a00ff, #140032);
      overflow:hidden;
    }
    .logo-circle img{ width:100%; height:100%; object-fit:cover; }
    nav{ display:flex; align-items:center; gap:0.75rem; }
    .nav-link{
      padding:0.6rem 1.6rem; border-radius:999px; font-size:0.92rem;
      color: var(--muted); border: 1px solid transparent; font-weight:500;
      transition: background .15s ease, color .15s ease, border-color .15s ease;
    }
    .nav-link.active{ background: var(--accent); color:#02010a; font-weight:600; }
    .nav-link:hover{ border-color: rgba(123,255,90,.6); color: var(--text); }

    .cart-pill{
      display:inline-flex; align-items:center; gap:0.35rem;
      padding:0.45rem 0.9rem; border-radius:999px;
      background: rgba(123,255,90,.12);
      border:1px solid rgba(123,255,90,.5);
      font-size:0.88rem;
    }
    .cart-pill span{
      background: var(--accent); color:#02010a; border-radius:999px;
      padding:0.2rem 0.6rem; font-weight:600;
    }

    main{ max-width:1100px; margin:0 auto; padding:1.5rem 1.25rem 3rem; }
    h2{ margin-bottom:0.75rem; font-size:1.8rem; }
    .subtitle{ margin:0; color: var(--muted); font-size:0.95rem; }

    .products-grid{
      margin-top:1.75rem; display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:1rem;
    }
    @media(min-width:800px){ .products-grid{ grid-template-columns:repeat(3,minmax(0,1fr)); gap:1.25rem; } }
    @media(min-width:1100px){ .products-grid{ grid-template-columns:repeat(4,minmax(0,1fr)); } }

    .record-card{
      background: var(--card);
      border-radius:1.4rem;
      padding:1rem;
      border:1px solid var(--border);
      display:flex;
      flex-direction:column;
      gap:0.4rem;
    }

    /* image tap area opens modal */
    .record-image{
      position:relative;
      width:100%;
      aspect-ratio:1/1;
      perspective:1000px;
      margin-bottom:.5rem;
      cursor:pointer;
    }

    .flip-wrapper{ width:100%; height:100%; }
    .flip-inner{
      position:relative; width:100%; height:100%;
      border-radius:1rem; overflow:hidden;
      transform-style:preserve-3d;
      transition: transform .5s ease;
    }
    .flip-front, .flip-back{ position:absolute; inset:0; backface-visibility:hidden; }
    .flip-back{ transform: rotateY(180deg); }
    .record-card:hover .flip-inner{ transform: rotateY(180deg); }

    .record-card img{ width:100%; height:100%; object-fit:cover; display:block; }
    .image-missing{
      background: repeating-linear-gradient(45deg,#1f102f,#1f102f 6px,#12061f 6px,#12061f 12px);
    }

    .share-link{ display:block; }
    .share-link:hover{
      text-decoration:underline;
      text-decoration-color: rgba(123,255,90,.7);
    }

    .record-card h3{ font-size:1rem; margin:0.15rem 0; }
    .record-grade{ font-size:0.85rem; color: var(--muted); }
    .record-price{ font-weight:600; margin-top:0.2rem; }
    .record-desc{ font-size:0.85rem; color: var(--muted); flex:1; }

    .qty-text{ font-size:0.85rem; color: var(--muted); margin-top:0.15rem; }

    .btn-primary{
      border-radius:999px;
      padding:0.6rem 1.3rem;
      font-size:0.92rem;
      border:none;
      cursor:pointer;
      font-weight:600;
      background: var(--accent);
      color:#02010a;
      margin-top:0.5rem;
    }
    .btn-primary:hover{ filter:brightness(1.05); }

    .pagination{
      display:flex; justify-content:center; align-items:center;
      gap:.5rem; margin-top:2rem;
    }
    .pagination button{
      min-width:40px;
      padding:.35rem .9rem;
      border-radius:999px;
      border:1px solid rgba(123,255,90,.7);
      background: rgba(123,255,90,.12);
      color: var(--accent);
      font-weight:600;
      font-size:.9rem;
      cursor:pointer;
    }
    .pagination button.active{
      background: var(--accent);
      color:#02010a;
      box-shadow:0 0 12px rgba(123,255,90,.5);
    }

    footer{
      max-width:1100px; margin:0 auto;
      padding:0 1.25rem 2rem;
      font-size:0.78rem; color: var(--muted);
      text-align:center;
    }
    footer strong{ color: var(--accent); }

    .floating-message{
      position:fixed; bottom:20px; right:20px; z-index:9999;
      width:50px; height:50px; border-radius:999px;
      background: var(--accent);
      color:#02010a;
      display:flex; align-items:center; justify-content:center;
      font-size:1.3rem; font-weight:700;
      box-shadow:0 0 16px rgba(123,255,90,.5);
      cursor:pointer;
    }

    /* Zombie Kitty overlay */
    .zk-overlay{
      position:fixed;
      bottom:90px;
      left:-420px;
      display:flex;
      align-items:flex-end;
      gap:10px;
      z-index:9998;
      transition:left .6s ease;
      pointer-events:none;
    }
    .zk-overlay.active{ left:20px; }
    .zk-kitty{
      width:140px;
      opacity:.95;
      animation: zk-blink 5s infinite, zk-wave 1.2s infinite ease-in-out;
      transform-origin: top right;
    }
    @keyframes zk-blink{ 0%,90%,100%{filter:brightness(1)} 92%{filter:brightness(.2)} 95%{filter:brightness(1)} }
    @keyframes zk-wave{ 0%{transform:rotate(0)} 20%{transform:rotate(6deg)} 40%{transform:rotate(-6deg)} 60%{transform:rotate(6deg)} 80%{transform:rotate(-4deg)} 100%{transform:rotate(0)} }

    .zk-bubble{
      background:#ffeb3b; color:#000;
      padding:12px 16px;
      font-weight:600;
      border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,.3);
      max-width:240px;
      pointer-events:auto; /* clickable */
      position:relative;
      font-size:.9rem;
      line-height:1.4;
      cursor:pointer;
    }
    .zk-tail{
      width:0; height:0;
      border-left:12px solid #ffeb3b;
      border-top:12px solid transparent;
      border-bottom:12px solid transparent;
      position:absolute;
      left:-12px;
      bottom:20px;
    }
  </style>

  <!-- Load order matters -->
  <script defer src="script.js"></script>
  <script defer src="shop-ui.js"></script>
  <script defer src="zk.js"></script>
</head>

<body>
  <header>
    <div class="nav-inner">
      <a href="index.html" class="logo-link">
        <div class="logo-circle">
          <img src="images/Screenshot_20250831-144625.png" alt="KornDog Records logo" />
        </div>
      </a>

      <nav>
        <a href="index.html" class="nav-link">Home</a>
        <a href="shop.html" class="nav-link active">Shop</a>
        <a href="cart.html" class="nav-link cart-pill">Cart <span data-cart-count>0</span></a>
      </nav>
    </div>
  </header>

  <main>
    <h2>Shop Vinyl</h2>
    <p class="subtitle">Hand-picked records. Graded honestly. First paid gets it.</p>

    <div id="products" class="products-grid"></div>
    <div id="pagination" class="pagination"></div>
  </main>

  <footer>Â© 2025 <strong>KornDog Records</strong> Â· Vinyl Therapy Never Dies.</footer>

  <!-- Floating Contact -->
  <a id="floatingJoey" class="floating-message" aria-label="Contact Joey">ðŸ’¬</a>

  <!-- Zombie Kitty Assistant -->
  <div id="zkOverlay" class="zk-overlay">
    <img src="images/3817.png" class="zk-kitty" alt="Zombie Kitty" />
    <div class="zk-bubble" id="zkBubble">
      <div class="zk-tail"></div>
      Hi! I'm Zombie Kitty â€” your crate-digging assistant.<br><br>
      Tap here to text KornDog.
    </div>
  </div>

  <!-- Quick View Modal (injected by shop-ui.js) -->

<!-- FINAL QUICK VIEW CLICK WIRING -->
<script>
  (function () {
    const grid = document.getElementById("products");
    if (!grid || !window.kdOpenModalFromCard) return;

    grid.addEventListener("click", function (e) {
      const card = e.target.closest(".record-card");
      if (!card) return;

      const imgClick =
        e.target.closest(".record-image") ||
        e.target.tagName === "IMG";

      // Image click â†’ open Quick View
      if (imgClick) {
        e.preventDefault();
        e.stopPropagation();
        window.kdOpenModalFromCard(card);
      }
    }, true);
  })();
</script>

</body>
</html>
